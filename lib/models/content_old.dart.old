import 'package:cloud_firestore/cloud_firestore.dart';
import 'package:cloud_firestore_odm/annotation.dart';
import 'package:dreamsanctuary/models/chat_user.dart';
import 'package:dreamsanctuary/models/content/content.dart';
import 'package:equatable/equatable.dart';
import 'package:flutter/widgets.dart';

mixin Content on Equatable {
  late String id;
  late String contentType;
  @Collection<ChatUser>('users')
  late ChatUser user;
  late String uploadTimestamp;

  Content copyWith({
    String? id,
    String? contentType,
    ChatUser? user,
    String? uploadTimestamp,
  });

  Map<String, dynamic> toJson();

  // factory Content.fromDocument(DocumentSnapshot snapshot) {};

  Widget buildContent();

  @override
  List<Object?> get props;

  static Content fromDocument(DocumentSnapshot<Object?> documentSnapshot) {
    switch (documentSnapshot.get("contentType")) {
      case ImageContent:
      default:
        return ImageContent.fromDocument(documentSnapshot);
    }
  }
}
